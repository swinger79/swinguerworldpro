{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/technoandcompany/swinguerworldpro/apps/web/pages/premium.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useRouter } from 'next/router';\n\nexport default function Premium() {\n  const router = useRouter();\n  const [user, setUser] = useState(null);\n  const [plans, setPlans] = useState({});\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const userData = localStorage.getItem('user');\n\n    if (!token) {\n      router.push('/login');\n      return;\n    }\n\n    setUser(JSON.parse(userData));\n    fetchPlans();\n  }, [router]);\n\n  const fetchPlans = async () => {\n    try {\n      const res = await fetch('http://localhost:3001/plans');\n      const data = await res.json();\n      setPlans(data);\n    } catch (err) {\n      console.error('Error:', err);\n    }\n  };\n\n  const handleUpgrade = async (planName) => {\n    setLoading(true);\n\n    try {\n      const token = localStorage.getItem('token');\n      const res = await fetch('http://localhost:3001/payment/create-session', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ plan: planName })\n      });\n\n      const data = await res.json();\n\n      if (data.sessionId) {\n        // En producci√≥n, usar Stripe checkout\n        alert(`‚úÖ En desarrollo: Plan ${planName} activado\\n\\nEn producci√≥n usar√≠as Stripe Checkout.\\n\\nSession ID: ${data.sessionId}`);\n\n        // Simular pago completado\n        const verifyRes = await fetch('http://localhost:3001/payment/verify', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          },\n          body: JSON.stringify({\n            sessionId: data.sessionId,\n            plan: planName\n          })\n        });\n\n        const verifyData = await verifyRes.json();\n        if (verifyData.success) {\n          localStorage.setItem('user', JSON.stringify(verifyData.user));\n          alert(`‚úÖ ¬°Bienvenido al plan ${planName}!`);\n          router.push('/dashboard');\n        }\n      }\n    } catch (err) {\n      alert('Error al procesar el pago: ' + err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!user) return <p>‚è≥ Cargando...</p>;\n\n  const planOrder = ['FREE', 'PRO', 'ADVANCED', 'ELITE', 'DIAMOND'];\n\n  return (\n    <div style={{ padding: '40px 20px', fontFamily: 'Arial', background: '#f9f9f9', minHeight: '100vh' }}>\n      <div style={{ maxWidth: '1200px', margin: '0 auto' }}>\n        <h1 style={{ textAlign: 'center', marginBottom: '10px' }}>üíé Planes Premium</h1>\n        <p style={{ textAlign: 'center', color: '#666', marginBottom: '40px' }}>\n          Tu plan actual: <strong>{user.plan}</strong>\n        </p>\n\n        <div style={{\n          display: 'grid',\n          gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\n          gap: '20px'\n        }}>\n          {planOrder.map(planKey => {\n            const plan = plans[planKey];\n            if (!plan) return null;\n\n            const isCurrentPlan = user.plan === planKey;\n            const price = plan.price === 0 ? 'Gratis' : `$${(plan.price / 100).toFixed(2)}/mes`;\n\n            return (\n              <div key={planKey} style={{\n                border: isCurrentPlan ? '3px solid #007bff' : '1px solid #ddd',\n                borderRadius: '8px',\n                padding: '20px',\n                background: isCurrentPlan ? '#e7f3ff' : 'white',\n                boxShadow: '0 2px 8px rgba(0,0,0,0.1)'\n              }}>\n                <h2 style={{ marginTop: 0 }}>{plan.name}</h2>\n                <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#007bff', marginBottom: '20px' }}>\n                  {price}\n                </div>\n\n                <ul style={{ listStyle: 'none', padding: 0, marginBottom: '20px' }}>\n                  {plan.features.map((feature, idx) => (\n                    <li key={idx} style={{ padding: '8px 0', borderBottom: '1px solid #eee' }}>\n                      ‚úÖ {feature}\n                    </li>\n                  ))}\n                </ul>\n\n                {isCurrentPlan ? (\n                  <button\n                    disabled\n                    style={{\n                      width: '100%',\n                      padding: '12px',\n                      background: '#28a745',\n                      color: 'white',\n                      border: 'none',\n                      borderRadius: '5px',\n                      cursor: 'default',\n                      fontWeight: 'bold'\n                    }}\n                  >\n                    ‚úÖ Plan actual\n                  </button>\n                ) : (\n                  <button\n                    onClick={() => handleUpgrade(planKey)}\n                    disabled={loading}\n                    style={{\n                      width: '100%',\n                      padding: '12px',\n                      background: loading ? '#ccc' : '#007bff',\n                      color: 'white',\n                      border: 'none',\n                      borderRadius: '5px',\n                      cursor: loading ? 'default' : 'pointer',\n                      fontWeight: 'bold'\n                    }}\n                  >\n                    {loading ? 'Procesando...' : 'Actualizar'}\n                  </button>\n                )}\n              </div>\n            );\n          })}\n        </div>\n\n        <div style={{ marginTop: '40px', textAlign: 'center' }}>\n          <button\n            onClick={() => router.push('/dashboard')}\n            style={{\n              padding: '12px 30px',\n              background: '#6c757d',\n              color: 'white',\n              border: 'none',\n              borderRadius: '5px',\n              cursor: 'pointer',\n              fontSize: '14px'\n            }}\n          >\n            Volver al dashboard\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}